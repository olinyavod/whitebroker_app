<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="WhiteBroker.MainPage"
             Shell.NavBarIsVisible="False">

    <Grid>
        <!-- ÐžÑÐ½Ð¾Ð²Ð½Ð¾Ð¹ ÐºÐ¾Ð½Ñ‚ÐµÐ½Ñ‚ Ñ WebView -->
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition x:Name="consoleRow" Height="0" />
        </Grid.RowDefinitions>

        <!-- WebView (Ð¸Ð·Ð½Ð°Ñ‡Ð°Ð»ÑŒÐ½Ð¾ ÑÐºÑ€Ñ‹Ñ‚, Ð¿Ð¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÑ‚ÑÑ Ð¿Ð¾ÑÐ»Ðµ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾Ð¹ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸) -->
        <WebView x:Name="webView"
                 Grid.Row="0"
                 Source="https://my.whitebrokerdv.ru"
                 IsVisible="False"
                 VerticalOptions="FillAndExpand"
                 HorizontalOptions="FillAndExpand" />

        <!-- Ð˜Ð½Ð´Ð¸ÐºÐ°Ñ‚Ð¾Ñ€ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ -->
        <ActivityIndicator x:Name="loadingIndicator"
                          Grid.Row="0"
                          IsRunning="True"
                          IsVisible="True"
                          Color="#512BD4"
                          VerticalOptions="Center"
                          HorizontalOptions="Center"
                          WidthRequest="50"
                          HeightRequest="50" />

        <!-- Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ Ð¾Ð± Ð¾ÑˆÐ¸Ð±ÐºÐµ -->
        <StackLayout x:Name="errorLayout"
                     Grid.Row="0"
                     IsVisible="False"
                     VerticalOptions="Center"
                     HorizontalOptions="Center"
                     Padding="30">
            <Label Text="âš ï¸"
                   FontSize="60"
                   HorizontalOptions="Center" />
            <Label x:Name="errorLabel"
                   Text="ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ñ‹"
                   FontSize="18"
                   HorizontalOptions="Center"
                   HorizontalTextAlignment="Center"
                   Margin="0,20,0,20" />
            <Button Text="ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ"
                    Clicked="OnRefreshClicked"
                    HorizontalOptions="Center"
                    BackgroundColor="#512BD4"
                    TextColor="White"
                    CornerRadius="10"
                    Padding="30,10" />
        </StackLayout>

        <!-- ÐšÐ¾Ð½ÑÐ¾Ð»ÑŒ Ð±Ñ€Ð°ÑƒÐ·ÐµÑ€Ð° -->
        <Grid x:Name="consolePanel"
              Grid.Row="1"
              BackgroundColor="#1E1E1E"
              IsVisible="False">
            <Grid.RowDefinitions>
                <RowDefinition Height="40" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <!-- Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº ÐºÐ¾Ð½ÑÐ¾Ð»Ð¸ -->
            <Grid Grid.Row="0" BackgroundColor="#2D2D2D">
                <Label Text="JavaScript Console"
                       TextColor="White"
                       FontSize="14"
                       FontAttributes="Bold"
                       VerticalOptions="Center"
                       Margin="10,0,0,0" />
                <HorizontalStackLayout HorizontalOptions="End" Margin="0,0,10,0">
                    <Button Text="ðŸ“‹ ÐšÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ"
                            Clicked="OnCopyLogsClicked"
                            BackgroundColor="#444444"
                            TextColor="White"
                            FontSize="12"
                            CornerRadius="5"
                            Padding="10,5"
                            Margin="0,0,5,0" />
                    <Button Text="ÐžÑ‡Ð¸ÑÑ‚Ð¸Ñ‚ÑŒ"
                            Clicked="OnClearConsoleClicked"
                            BackgroundColor="#444444"
                            TextColor="White"
                            FontSize="12"
                            CornerRadius="5"
                            Padding="10,5"
                            Margin="0,0,5,0" />
                    <Button Text="âœ•"
                            Clicked="OnToggleConsoleClicked"
                            BackgroundColor="#444444"
                            TextColor="White"
                            FontSize="16"
                            CornerRadius="5"
                            Padding="10,5" />
                </HorizontalStackLayout>
            </Grid>

            <!-- Ð¡Ð¾Ð´ÐµÑ€Ð¶Ð¸Ð¼Ð¾Ðµ ÐºÐ¾Ð½ÑÐ¾Ð»Ð¸ -->
            <ScrollView Grid.Row="1" x:Name="consoleScrollView">
                <VerticalStackLayout x:Name="consoleContent" Padding="10" />
            </ScrollView>
        </Grid>

        <!-- ÐšÐ½Ð¾Ð¿ÐºÐ° Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚Ð¸Ñ ÐºÐ¾Ð½ÑÐ¾Ð»Ð¸ -->
        <Button x:Name="consoleToggleButton"
                Text="ðŸ” Console"
                Clicked="OnToggleConsoleClicked"
                BackgroundColor="#512BD4"
                TextColor="White"
                CornerRadius="25"
                WidthRequest="120"
                HeightRequest="50"
                HorizontalOptions="End"
                VerticalOptions="End"
                Margin="0,0,20,20"
                Grid.Row="0" />
    </Grid>

</ContentPage>





